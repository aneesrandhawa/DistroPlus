<%- include('../partials/header.ejs') -%>

    <!-- Page Banner Section Start -->
    <div class="page-banner-section section bg-image" data-bg="assets/images/bg/breadcrumb.png">
        <div class="container">
            <div class="row">
                <div class="col">

                    <div class="page-banner text-left">
                        <h2>Login Register</h2>
                        <ul class="page-breadcrumb">
                            <li><a href="index.html">Home</a></li>
                            <li>Login Register</li>
                        </ul>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <!-- Page Banner Section End -->
    <!--Login Register section start-->
    <div class="login-register-section section pt-90 pt-lg-70 pt-md-60 pt-sm-55 pt-xs-45  pb-70 pb-lg-50 pb-md-40 pb-sm-30 pb-xs-20">
        <div class="container">
            <div class="row">
                <!--Login Form Start-->
                <div class="col-md-6 col-sm-6">
                    <div class="customer-login-register">
                        <div class="form-login-title">
                            <h2>Login</h2>
                        </div>
                        <div class="login-form">
                            <form id="login">
                                <div class="form-fild">
                                    <p><label> email address <span class="required">*</span></label></p>
                                    <input name="username" type="text">
                                </div>
                                <div class="form-fild">
                                    <p><label>Password <span class="required">*</span></label></p>
                                    <input name="password" value="" type="password">
                                </div>
                                <div class="login-submit">
                                    <button type="submit" class="btn">Login</button>
                                    <label>
                                            <input class="checkbox" name="rememberme" value="" type="checkbox">
                                            <span>Remember me</span>
                                        </label>
                                </div>
                                <div class="lost-password">
                                    <a href="#">Lost your password?</a>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!--Login Form End-->
                <!--Register Form Start-->
                <div class="col-md-6 col-sm-6">
                    <div class="customer-login-register register-pt-0">
                        <div class="form-register-title">
                            <h2>Register</h2>
                        </div>
                        <div class="register-form">
                            <form id="register">
                                <div class="form-fild">
                                    <p><label>Name <span class="required">*</span></label></p>
                                    <input name="username" value="" type="text">
                                </div>
                                <div class="form-fild">
                                    <p><label>Phone <span class="required">*</span></label></p>
                                    <input name="phone" value="" type="text">
                                </div>
                                <div class="form-fild">
                                    <p><label>Email <span class="required">*</span></label></p>
                                    <input name="email" value="" type="text">
                                </div>
                                <div class="form-fild">
                                    <p><label>Password <span class="required">*</span></label></p>
                                    <input name="password" value="" type="password">
                                </div>
                                <div class="register-submit">
                                    <button type="submit" class="btn">Register</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!--Register Form End-->
            </div>
        </div>
    </div>
    <!--Login Register section end-->
    <!-- Newsletter Section Start -->
    <div class="newsletter-section section bg-gray-two pt-100 pt-lg-80 pt-md-70 pt-sm-60 pt-xs-50 pb-95 pb-lg-75 pb-md-65 pb-sm-60 pb-xs-50">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <div class="newsletter-content">
                        <h2>Subscribe Our Newsletter</h2>
                        <p>Subscribe Today for free and save 10% on your first purchase.</p>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="newsletter-wrap">
                        <div class="newsletter-form">
                            <form id="mc-form" class="mc-form">
                                <input type="email" placeholder="Enter Your Email Address Here..." required>
                                <button type="submit" value="submit">SUBSCRIBE!</button>
                            </form>

                        </div>
                        <!-- mailchimp-alerts Start -->
                        <div class="mailchimp-alerts">
                            <div class="mailchimp-submitting"></div>
                            <!-- mailchimp-submitting end -->
                            <div class="mailchimp-success"></div>
                            <!-- mailchimp-success end -->
                            <div class="mailchimp-error"></div>
                            <!-- mailchimp-error end -->
                        </div>
                        <!-- mailchimp-alerts end -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Newsletter Section End -->
    <script>
        const form1 = document.getElementById('login')
        form1.addEventListener('submit', async(e) => {
            e.preventDefault()
            const result = await fetch('http://localhost:3000/auth/login', {
                method: 'POST',
                body: JSON.stringify({
                    username: form1.username.value,
                    password: form1.password.value,
                }),
                headers: {
                    'content-Type': 'application/json',

                }
            })

            const data = await result.json();
            if (data.status == true) {
                location.assign(`http://localhost:3000/`)
            }
            // console.log("Working")
            // console.log(await data);

            // document.getElementsByClassName("left")[0].innerHTML = data.data.user_id
        })


        // --------Register------
        const myForm = document.getElementById('register');
        myForm.addEventListener('submit', async(e) => {
            e.preventDefault();
            const result = await fetch('http://localhost:3000/auth/register', {
                method: 'POST',
                body: JSON.stringify({
                    name: myForm.Name.value,
                    phone: myForm.phone.value,
                    email: myForm.email.value,
                    password: myForm.password.value,
                    admin: myForm.isAdmin.value,
                }),
                headers: {
                    'content-Type': 'application/json'
                }
            })
            const data = await result.json();
            if (data.status == true) {
                location.assign(`http://localhost:3000/`)
            }
            // document.getElementsByClassName("left")[0].innerHTML = data

        })
    </script>
    <%- include('../partials/footer.ejs') -%>